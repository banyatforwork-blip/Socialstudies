<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ñ‡πâ‡∏≤‡∏â‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô... (In Their Shoes) - M.1 Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Anuphan:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Anuphan', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 4s ease-in-out infinite',
                        'fade-up': 'fadeUp 0.6s ease-out forwards',
                        'pulse-soft': 'pulseSoft 3s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-15px)' },
                        },
                        fadeUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        pulseSoft: {
                            '0%, 100%': { opacity: '0.2', transform: 'scale(1)' },
                            '50%': { opacity: '0.4', transform: 'scale(1.1)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 10px 40px -10px rgba(31, 38, 135, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .stagger-1 { animation-delay: 0.1s; }
        .stagger-2 { animation-delay: 0.2s; }
        .stagger-3 { animation-delay: 0.3s; }
    </style>
</head>
<body class="flex flex-col items-center justify-center p-4 md:p-6 text-slate-800">

    <div id="app" class="w-full max-w-3xl relative">
        <!-- Background Decor -->
        <div class="absolute -top-20 -left-20 w-64 h-64 bg-indigo-200 rounded-full blur-[100px] animate-pulse-soft -z-10"></div>
        <div class="absolute top-40 -right-20 w-72 h-72 bg-pink-200 rounded-full blur-[100px] animate-pulse-soft -z-10" style="animation-delay: 1.5s"></div>

        <!-- Main Content Container -->
        <div id="content-area">
            <!-- Content will be injected via JavaScript -->
        </div>
    </div>

    <footer class="mt-8 text-center text-slate-400 text-xs font-light tracking-wide opacity-0 animate-fade-up" style="animation-delay: 0.8s">
        ¬© Educational Simulation Tool | ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏°
    </footer>

    <script>
        // --- 1. DATA POOL ---
        const ROLE_POOL = [
            { id: 'disabled', title: '‡∏Ñ‡∏ô‡∏û‡∏¥‡∏Å‡∏≤‡∏£ (‡πÉ‡∏ä‡πâ‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô)', income: '800 ‡∏ö‡∏≤‡∏ó (‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏¢‡∏±‡∏á‡∏ä‡∏µ‡∏û)', details: ['‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡πÄ‡∏°‡∏•‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏ü‡∏∏‡∏ï‡∏ö‡∏≤‡∏ó‡πÑ‡∏î‡πâ‡∏¢‡∏≤‡∏Å', '‡∏´‡∏≤‡∏á‡∏≤‡∏ô‡∏ó‡∏≥‡∏•‡∏≥‡∏ö‡∏≤‡∏Å‡πÅ‡∏°‡πâ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏ö‡∏™‡∏π‡∏á', '‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏ã‡πà‡∏≠‡∏°‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô‡∏ö‡πà‡∏≠‡∏¢‡πÜ'], icon: '‚ôø', color: 'bg-blue-50', border: 'border-blue-200', text: 'text-blue-700' },
            { id: 'farmer', title: '‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£‡∏£‡∏≤‡∏¢‡∏¢‡πà‡∏≠‡∏¢', income: '‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô (‡∏Ç‡∏≤‡∏¢‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡πÑ‡∏î‡πâ‡∏ô‡πâ‡∏≠‡∏¢)', details: ['‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏∏‡πã‡∏¢‡πÅ‡∏û‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ', '‡∏ñ‡πâ‡∏≤‡∏ù‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏Å‡∏ï‡∏≤‡∏°‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡∏Ç‡∏≤‡∏¢', '‡∏°‡∏µ‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏π‡πâ‡∏°‡∏≤‡∏•‡∏á‡∏ó‡∏∏‡∏ô'], icon: 'üåæ', color: 'bg-green-50', border: 'border-green-200', text: 'text-green-700' },
            { id: 'student', title: '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏≤‡∏£‡πå‡∏ó‡πÑ‡∏ó‡∏°‡πå', income: '3,000 ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô', details: ['‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡πà‡∏ß‡∏¢‡∏û‡πà‡∏≠‡πÅ‡∏°‡πà‡∏´‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡πà‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô', '‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô'], icon: 'üéí', color: 'bg-orange-50', border: 'border-orange-200', text: 'text-orange-700' },
            { id: 'singlemom', title: '‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏°‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß', income: '12,000 ‡∏ö‡∏≤‡∏ó', details: ['‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡∏ô‡∏°‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß', '‡∏ñ‡πâ‡∏≤‡∏•‡∏π‡∏Å‡∏õ‡πà‡∏ß‡∏¢‡∏à‡∏∞‡∏•‡∏≥‡∏ö‡∏≤‡∏Å‡∏°‡∏≤‡∏Å‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡∏ä‡πà‡∏ß‡∏¢', '‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏•‡∏π‡∏Å'], icon: 'üë©‚Äçüëß', color: 'bg-pink-50', border: 'border-pink-200', text: 'text-pink-700' },
            { id: 'rider', title: '‡∏û‡∏µ‡πà‡πÑ‡∏£‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£', income: '‡∏ï‡∏≤‡∏°‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πà‡∏á', details: ['‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏û‡∏∏‡πà‡∏á‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏ï‡πà‡∏Ñ‡πà‡∏≤‡∏£‡∏≠‡∏ö‡∏•‡∏î‡∏•‡∏á', '‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡πÅ‡∏î‡∏î‡∏£‡πâ‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô', '‡∏£‡∏ñ‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡∏∑‡∏≠‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏´‡∏≤‡∏¢‡∏ó‡∏±‡∏ô‡∏ó‡∏µ'], icon: 'üõµ', color: 'bg-yellow-50', border: 'border-yellow-200', text: 'text-yellow-700' },
            { id: 'elderly', title: '‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß', income: '600 ‡∏ö‡∏≤‡∏ó (‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ä‡∏£‡∏≤)', details: ['‡∏™‡∏≤‡∏¢‡∏ï‡∏≤‡πÑ‡∏°‡πà‡∏î‡∏µ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡πà‡∏á', '‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏∂‡πà‡∏á‡∏û‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£', '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏õ‡∏ß‡∏î‡πÄ‡∏Ç‡πà‡∏≤‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ'], icon: 'üëµ', color: 'bg-slate-50', border: 'border-slate-200', text: 'text-slate-700' },
            { id: 'cleaner', title: '‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î', income: '‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô', details: ['‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏ä‡πâ‡∏≤‡∏°‡∏∑‡∏î ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏Å‡∏•‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡πà‡∏≠', '‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏•‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å', '‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô'], icon: 'üßπ', color: 'bg-sky-50', border: 'border-sky-200', text: 'text-sky-700' },
            { id: 'factory', title: '‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô', income: '350 ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô', details: ['‡∏ñ‡πâ‡∏≤‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô', '‡πÄ‡∏ä‡πà‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡πÅ‡∏Ñ‡∏ö‡πÜ ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô', '‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÇ‡∏î‡∏ô‡πÄ‡∏•‡∏¥‡∏Å‡∏à‡πâ‡∏≤‡∏á‡∏ñ‡πâ‡∏≤‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à‡πÑ‡∏°‡πà‡∏î‡∏µ'], icon: 'üè≠', color: 'bg-zinc-50', border: 'border-zinc-300', text: 'text-zinc-700' }
        ];

        const SCENARIO_POOL = [
            { title: '‡πÇ‡∏î‡∏ô‡πÅ‡∏Å‡πä‡∏á‡∏Ñ‡∏≠‡∏•‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏´‡∏•‡∏≠‡∏Å', desc: '‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡πâ‡∏≠‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÉ‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ñ‡∏π‡∏Å‡πÇ‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏à‡∏ô‡πÄ‡∏Å‡∏•‡∏µ‡πâ‡∏¢‡∏á ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡∏£‡πâ‡∏≠‡∏¢‡∏ö‡∏≤‡∏ó‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏ô‡∏µ‡πâ', icon: 'üìû' },
            { title: '‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏´‡∏ô‡∏±‡∏Å', desc: '‡∏£‡∏ñ‡∏Ñ‡∏π‡πà‡πÉ‡∏à‡∏û‡∏±‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏≤‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏≠‡∏π‡πà‡∏ã‡πà‡∏≠‡∏°‡∏î‡πà‡∏ß‡∏ô ‡∏Ñ‡πà‡∏≤‡∏ã‡πà‡∏≠‡∏°‡∏™‡∏π‡∏á‡∏ñ‡∏∂‡∏á 3,000 ‡∏ö‡∏≤‡∏ó‡∏ã‡∏∂‡πà‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡πá‡∏ö', icon: 'üõ†Ô∏è' },
            { title: '‡∏ô‡πâ‡∏≥‡∏ó‡πà‡∏ß‡∏°‡∏â‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏ô', desc: '‡∏ô‡πâ‡∏≥‡πÑ‡∏´‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡πà‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å ‡∏Ç‡πâ‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏¢‡∏∏‡∏î‡∏á‡∏≤‡∏ô‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏≤‡∏î‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÑ‡∏õ‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏±‡∏ô', icon: 'üåßÔ∏è' },
            { title: '‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏£‡∏≠‡∏á‡∏ä‡∏µ‡∏û‡∏û‡∏∏‡πà‡∏á‡∏™‡∏π‡∏á 2 ‡πÄ‡∏ó‡πà‡∏≤', desc: '‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡πâ‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÑ‡∏Ç‡πà‡πÑ‡∏Å‡πà‡πÅ‡∏û‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏ô‡∏ô‡πà‡∏≤‡∏ï‡∏Å‡πÉ‡∏à ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÑ‡∏°‡πà‡∏û‡∏≠‡∏ã‡∏∑‡πâ‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ó‡∏±‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï', icon: 'ü•ö' },
            { title: '‡πÄ‡∏à‡πá‡∏ö‡∏õ‡πà‡∏ß‡∏¢‡∏Å‡∏∞‡∏ó‡∏±‡∏ô‡∏´‡∏±‡∏ô', desc: '‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏ó‡πâ‡∏ß‡∏á‡∏à‡∏ô‡∏•‡∏∏‡∏Å‡πÑ‡∏õ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏´‡∏ß ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏õ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏´‡∏±‡∏Å‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ', icon: 'ü§í' }
        ];

        // --- 2. GAME STATE ---
        let state = {
            playerCount: 1,
            activeRoles: [],
            scenarios: [],
            currentRound: 0,
            maxRounds: 3
        };

        const appContainer = document.getElementById('content-area');

        // --- 3. HELPER FUNCTIONS ---
        function shuffle(array) {
            const newArr = [...array];
            for (let i = newArr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
            }
            return newArr;
        }

        function adjustPlayers(delta) {
            const newVal = state.playerCount + delta;
            if (newVal >= 1 && newVal <= ROLE_POOL.length) {
                state.playerCount = newVal;
                const el = document.getElementById('player-count-display');
                if (el) {
                    el.classList.add('scale-125', 'text-indigo-600');
                    el.innerText = state.playerCount;
                    setTimeout(() => el.classList.remove('scale-125', 'text-indigo-600'), 200);
                }
            }
        }

        // --- 4. RENDER PAGES ---
        function renderSetup() {
            appContainer.innerHTML = `
                <div class="glass-card rounded-[2.5rem] p-8 md:p-12 text-center animate-fade-up">
                    <div class="inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-indigo-500 to-indigo-700 text-white text-5xl rounded-3xl mb-8 shadow-xl shadow-indigo-200 animate-float">
                        üé≤
                    </div>
                    <h1 class="text-4xl md:text-5xl font-black text-indigo-950 mb-3 tracking-tight stagger-1 animate-fade-up opacity-0">‡∏ñ‡πâ‡∏≤‡∏â‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô...</h1>
                    <p class="text-slate-500 font-medium mb-10 text-lg stagger-2 animate-fade-up opacity-0">‡∏ö‡∏ó‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÉ‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏°</p>
                    
                    <div class="bg-indigo-50/50 rounded-3xl p-6 border border-indigo-100 mb-10 text-left stagger-3 animate-fade-up opacity-0">
                        <h3 class="font-bold text-indigo-900 mb-4 flex items-center gap-2 text-lg">
                            <span class="bg-indigo-600 text-white w-8 h-8 flex items-center justify-center rounded-lg text-sm">?</span> 
                            ‡∏Å‡∏é‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô (Rules)
                        </h3>
                        <div class="space-y-4">
                            <div class="flex gap-4">
                                <div class="font-black text-indigo-600">1.</div>
                                <p class="text-sm text-slate-600">‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö <b>"‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏™‡∏°‡∏°‡∏ï‡∏¥"</b> ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô</p>
                            </div>
                            <div class="flex gap-4">
                                <div class="font-black text-indigo-600">2.</div>
                                <p class="text-sm text-slate-600">‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ú‡∏ä‡∏¥‡∏ç‡∏Å‡∏±‡∏ö <b>"‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ß‡∏¥‡∏Å‡∏§‡∏ï"</b> 3 ‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ</p>
                            </div>
                            <div class="flex gap-4">
                                <div class="font-black text-indigo-600">3.</div>
                                <p class="text-sm text-slate-600">‡∏´‡∏•‡∏±‡∏á‡∏à‡∏ö‡πÄ‡∏Å‡∏° <b>"‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"</b> ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏•‡∏∑‡πà‡∏≠‡∏°‡∏•‡πâ‡∏≥‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="max-w-xs mx-auto mb-10 stagger-3 animate-fade-up opacity-0">
                        <p class="text-xs font-black text-slate-400 uppercase tracking-widest mb-4">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (1-${ROLE_POOL.length})</p>
                        <div class="flex items-center justify-between bg-white rounded-2xl p-2 shadow-inner border border-slate-100">
                            <button onclick="adjustPlayers(-1)" class="w-12 h-12 flex items-center justify-center rounded-xl hover:bg-slate-50 text-2xl transition-all active:scale-90">‚Äì</button>
                            <span id="player-count-display" class="text-4xl font-black text-slate-800 transition-all duration-200">${state.playerCount}</span>
                            <button onclick="adjustPlayers(1)" class="w-12 h-12 flex items-center justify-center rounded-xl hover:bg-slate-50 text-2xl transition-all active:scale-90">+</button>
                        </div>
                    </div>

                    <button onclick="startGame()" class="group w-full bg-indigo-600 hover:bg-indigo-700 text-white text-xl font-bold py-5 rounded-2xl shadow-2xl shadow-indigo-200 transition-all transform active:scale-95 flex items-center justify-center gap-3 stagger-3 animate-fade-up opacity-0">
                        ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏∏‡πà‡∏°‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï 
                        <span>‚ûú</span>
                    </button>
                </div>
            `;
        }

        function startGame() {
            state.activeRoles = shuffle(ROLE_POOL).slice(0, state.playerCount);
            state.scenarios = shuffle(SCENARIO_POOL).slice(0, state.maxRounds);
            state.currentRound = 0;
            renderRoleReveal();
        }

        function renderRoleReveal() {
            if (!state.activeRoles || state.activeRoles.length === 0) {
                renderSetup();
                return;
            }

            let rolesHTML = '';
            state.activeRoles.forEach((role, i) => {
                if (role) {
                    rolesHTML += `
                        <div class="glass-card bg-white rounded-3xl p-6 border-l-8 ${role.border} animate-fade-up opacity-0" style="animation-delay: ${i * 0.15}s">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="text-4xl animate-float" style="animation-delay: ${i * 0.2}s">${role.icon}</div>
                                <div>
                                    <p class="text-[10px] font-black text-slate-400 uppercase tracking-tighter">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà ${i + 1}</p>
                                    <h3 class="text-xl font-black ${role.text}">${role.title}</h3>
                                </div>
                            </div>
                            <div class="bg-slate-50 p-3 rounded-xl mb-4 border border-slate-100">
                                <p class="text-[10px] font-bold text-slate-400 uppercase mb-1">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ/‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì</p>
                                <p class="font-bold text-slate-700">${role.income}</p>
                            </div>
                            <ul class="text-sm text-slate-600 space-y-2 pl-2">
                                ${role.details.map(d => `<li class="flex gap-2"><span>‚Ä¢</span> ${d}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
            });

            appContainer.innerHTML = `
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-10 animate-fade-up">
                        <h2 class="text-3xl font-black text-slate-900 mb-2">üé≠ ‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏∞‡∏ï‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
                        <p class="text-slate-500">‡∏à‡∏≥‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î "‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï" ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡πÅ‡∏°‡πà‡∏ô</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-10">
                        ${rolesHTML}
                    </div>

                    <div class="text-center animate-fade-up opacity-0" style="animation-delay: 0.5s">
                        <button onclick="renderScenario()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-10 py-5 rounded-2xl font-bold text-lg shadow-xl transition-all transform active:scale-95">
                            ‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ß‡∏¥‡∏Å‡∏§‡∏ï ‚ö°
                        </button>
                    </div>
                </div>
            `;
            window.scrollTo(0, 0);
        }

        function renderScenario() {
            if (state.currentRound >= state.maxRounds) {
                renderReflection();
                return;
            }

            const s = state.scenarios[state.currentRound];
            if (!s) {
                renderReflection();
                return;
            }

            appContainer.innerHTML = `
                <div class="glass-card rounded-[3rem] p-8 md:p-12 text-center max-w-2xl mx-auto animate-fade-up">
                    <div class="inline-block px-4 py-1.5 rounded-full bg-indigo-50 text-indigo-600 text-xs font-black uppercase tracking-widest mb-8 border border-indigo-100">
                        ‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏ó‡∏µ‡πà ${state.currentRound + 1} / ${state.maxRounds}
                    </div>

                    <div class="mb-12">
                        <div class="text-9xl mb-8 inline-block animate-float">
                            ${s.icon}
                        </div>
                        <h2 class="text-3xl md:text-4xl font-black text-slate-900 mb-4 tracking-tight leading-tight stagger-1 animate-fade-up opacity-0">${s.title}</h2>
                        <div class="h-1 w-20 bg-indigo-500 mx-auto mb-6 rounded-full stagger-1 animate-fade-up opacity-0"></div>
                        <p class="text-xl text-slate-600 font-medium leading-relaxed italic px-4 stagger-2 animate-fade-up opacity-0">"${s.desc}"</p>
                    </div>

                    <div class="bg-indigo-600 rounded-[2rem] p-8 text-white shadow-2xl shadow-indigo-200 mb-10 stagger-3 animate-fade-up opacity-0">
                        <p class="text-indigo-200 font-bold text-xs uppercase tracking-[0.2em] mb-4">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ</p>
                        <p class="text-2xl md:text-3xl font-black italic leading-snug">
                            "‡∏î‡πâ‡∏ß‡∏¢‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ... <br class="hidden md:block"/>‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?"
                        </p>
                    </div>

                    <button onclick="nextRound()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-2xl transition-all shadow-xl flex items-center justify-center gap-2 transform active:scale-95 stagger-3 animate-fade-up opacity-0">
                        ${state.currentRound < state.maxRounds - 1 ? '‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ' : '‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°'}
                        <span>‚ûú</span>
                    </button>
                </div>
            `;
            window.scrollTo(0, 0);
        }

        function nextRound() {
            state.currentRound++;
            renderScenario();
        }

        function renderReflection() {
            appContainer.innerHTML = `
                <div class="glass-card rounded-[3rem] p-10 md:p-16 max-w-2xl mx-auto animate-fade-up">
                    <div class="text-center mb-12">
                        <div class="w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-6 animate-float">üèÅ</div>
                        <h2 class="text-4xl font-black text-slate-900 mb-2 tracking-tighter stagger-1 animate-fade-up opacity-0">‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
                        <p class="text-slate-500 italic stagger-1 animate-fade-up opacity-0">"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°" ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏û‡∏≠ ‡∏´‡∏≤‡∏Å "‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô" ‡πÑ‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô</p>
                    </div>

                    <div class="space-y-6 mb-12 text-left stagger-2 animate-fade-up opacity-0">
                        <div class="p-6 bg-slate-50 rounded-3xl border border-slate-100">
                            <h4 class="font-black text-slate-800 mb-2 flex items-center gap-2">
                                <span class="text-indigo-600">‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô‡∏ó‡∏µ‡πà 1:</span> ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à
                            </h4>
                            <p class="text-slate-600 text-sm leading-relaxed">‡πÉ‡∏Ñ‡∏£‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à "‡∏¢‡∏≠‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á" ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î? ‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô‡πÉ‡∏ô‡∏¢‡∏≤‡∏°‡∏ß‡∏¥‡∏Å‡∏§‡∏ï?</p>
                        </div>
                        <div class="p-6 bg-slate-50 rounded-3xl border border-slate-100">
                            <h4 class="font-black text-slate-800 mb-2 flex items-center gap-2">
                                <span class="text-indigo-600">‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô‡∏ó‡∏µ‡πà 2:</span> ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ó‡πà‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡πÅ‡∏•‡∏∞‡πÇ‡∏≠‡∏Å‡∏≤‡∏™
                            </h4>
                            <p class="text-slate-600 text-sm leading-relaxed">‡∏´‡∏≤‡∏Å‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏°‡∏µ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ (‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ñ‡πâ‡∏ß‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏î‡∏µ) ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÉ‡∏î‡∏à‡∏∞‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏á?</p>
                        </div>
                    </div>

                    <div class="flex flex-col sm:flex-row gap-4 stagger-3 animate-fade-up opacity-0">
                        <button onclick="location.reload()" class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-2xl transition-all shadow-xl active:scale-95">
                            üîÑ ‡πÄ‡∏•‡πà‡∏ô‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà
                        </button>
                        <button onclick="alert('‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏£‡∏±‡∏ö!')" class="flex-1 bg-white border-2 border-slate-100 text-slate-400 font-black py-5 rounded-2xl hover:bg-slate-50 transition-all active:scale-95">
                            ‡∏à‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
                        </button>
                    </div>
                </div>
            `;
            window.scrollTo(0, 0);
        }

        // Initial Start
        window.addEventListener('DOMContentLoaded', renderSetup);
    </script>
</body>
</html>
